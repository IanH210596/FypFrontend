<div class="wrapper">
  <app-header></app-header>
  <mat-card>
    <mat-card-header>
      <mat-card-title>Vaccination Details</mat-card-title>
    </mat-card-header>
    <mat-spinner *ngIf="isLoading"></mat-spinner>
    <form (submit)="saveVaccinationDetails(vaccinationDetailsForm)" #vaccinationDetailsForm="ngForm" *ngIf="!isLoading">
      <mat-form-field appearance="outline" [floatLabel]="floatLabelControl.value">
        <mat-label>PPSN</mat-label>
        <input matInput ngModel required type="text" name="ppsn" #ppsn="ngModel" [ngModel]="vaccinationDetails?.ppsn">
        <mat-error id="ppsnError" *ngIf="ppsn.invalid">Please enter a PPSN.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" [floatLabel]="floatLabelControl.value">
        <mat-label>Date Of Birth</mat-label>
        <input matInput ngModel required type="date" name="dateOfBirth" #dateOfBirth="ngModel" >
        <!-- [ngModel]="vaccinationDetails?.dateOfBirth" -->
        <mat-error id="dateOfBirthError" *ngIf="dateOfBirth.invalid">Please enter a Date of Birth.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" [floatLabel]="floatLabelControl.value">
        <mat-label>Gender</mat-label>
        <mat-select ngModel required name="gender" #gender="ngModel" [ngModel]="vaccinationDetails?.selectedGender">
          <mat-option *ngFor="let gender of genderList" [value]="gender.value">{{gender.viewValue}}</mat-option>
        </mat-select>
        <mat-error id="genderError" *ngIf="gender.invalid">Please select a Gender.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" [floatLabel]="floatLabelControl.value">
        <mat-label>Nationality</mat-label>
        <input matInput ngModel required type="text" name="nationality" #nationality="ngModel" [ngModel]="vaccinationDetails?.nationality">
        <mat-error id="nationalityError" *ngIf="nationality.invalid">Please enter a Nationality.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" [floatLabel]="floatLabelControl.value">
        <mat-label>Address 1</mat-label>
        <input matInput ngModel required type="text" name="addressOne" #addressOne="ngModel" [ngModel]="vaccinationDetails?.addressOne">
        <mat-error id="addressOneError" *ngIf="addressOne.invalid">Please enter an Address 1.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" [floatLabel]="floatLabelControl.value">
        <mat-label>Address 2</mat-label>
        <input matInput ngModel required type="text" name="addressTwo" #addressTwo="ngModel" [ngModel]="vaccinationDetails?.addressTwo">
        <mat-error id="addressTwoError" *ngIf="addressTwo.invalid">Please enter an Address 2.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" [floatLabel]="floatLabelControl.value">
        <mat-label>City</mat-label>
        <input matInput ngModel required type="text" name="city" #city="ngModel" [ngModel]="vaccinationDetails?.city">
        <mat-error id="cityError" *ngIf="city.invalid">Please enter a City.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" [floatLabel]="floatLabelControl.value">
        <mat-label>Post Code</mat-label>
        <input matInput ngModel required type="text" name="postCode" #postCode="ngModel" [ngModel]="vaccinationDetails?.postCode">
        <mat-error id="postCodeError" *ngIf="postCode.invalid">Please enter a Post Code.</mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" [floatLabel]="floatLabelControl.value">
        <mat-label>Vaccine Preference</mat-label>
        <mat-select ngModel required name="vaccinePreference" #vaccinePreference="ngModel" [ngModel]="vaccinationDetails?.selectedVaccinePreference">
          <mat-option *ngFor="let vaccinePreference of vaccinePreferenceList" [value]="vaccinePreference.value">{{vaccinePreference.viewValue}}</mat-option>
        </mat-select>
        <mat-error id="vaccinePreferenceError" *ngIf="vaccinePreference.invalid">Please enter a Vaccine Preference.</mat-error>
      </mat-form-field>

      <div class="btnHolder">
        <button id="save" mat-raised-button color="primary" type="submit">Save</button>
      </div>
    </form>
  </mat-card>
</div>
<footer id="footer"></footer>

